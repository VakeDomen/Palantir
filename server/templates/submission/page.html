<!doctype html>
<html>

<head>
  {% include "partials/head_include.html" %}
  <title>Submission {{ id }} details</title>
</head>

<body>
  {% include "partials/navbar.html" %}

  <section class="section">
    <div class="container">

      <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
          <li><a href="/admin">Dashboard</a></li>
          <li><a href="/admin/assignment/{{ info.moodle_assignment_id }}">Assignment {{ info.moodle_assignment_id }}</a>
          </li>
          <li class="is-active"><a aria-current="page">Submission {{ info.student_name }}</a></li>
        </ul>
      </nav>

      <div class="columns">
        <div class="column is-12">

          <div class="card" style="border-radius: 1rem;">
            <div class="card-content">
              <div class="content">

                <h3 class="title is-5" hx-trigger="load" hx-get="/admin/submissions/{{ id }}/artifacts"
                  hx-target="#artifacts" hx-swap="innerHTML">
                  Artifacts & Findings
                </h3>
                <div id="artifacts">
                  <p class="has-text-grey is-size-7">Loadingâ€¦</p>
                </div>



                <hr>
                <h3 class="title is-5" hx-trigger="load" hx-get="/admin/submissions/{{ id }}/net_timeline"
                  hx-target="#net-timeline" hx-swap="innerHTML">Network timeline</h3>
                <div class="buttons">

                  </span>
                </div>
                <div id="net-timeline"></div>

                <hr>
                <h3 class="title is-5" hx-get="/admin/submissions/{{ id }}/proc_timeline" hx-target="#proc-timeline"
                  hx-swap="outerHTML" hx-trigger="load">Process timeline</h3>

                <div id="proc-timeline"></div>

              </div>
            </div>
          </div>

        </div>

      </div>
  </section>

  <script>
    function copyText(id) {
      const el = document.getElementById(id);
      if (!el) return;
      const txt = el.textContent.trim();
      navigator.clipboard?.writeText(txt).then(() => {
        // optional: brief visual feedback
      }).catch(() => {
        // fallback
        const ta = document.createElement('textarea');
        ta.value = txt;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
      });
    }
  </script>
</body>

</html>